dnl Process this file with autoconf to produce a configure script.
AC_INIT(alsamixer/alsamixer.c)
AC_PREFIX_DEFAULT(/usr)
AM_INIT_AUTOMAKE(alsa-utils, 0.5.0)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_CXX
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_YACC
AM_PROG_LEX
AM_PATH_ALSA(0.1.1)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_LIB(ncurses, initscr, 
             [ CURSESINC='<ncurses.h>'; CURSESLIB='-lncurses'; ], [ 
	AC_CHECK_LIB(curses, initscr, 
        	     [ CURSESINC='<curses.h>'; CURSESLIB='-lcurses'; ])
])

AC_SUBST(CURSESINC)
AC_SUBST(CURSESLIB)

dnl Check for Gtk+
AM_PATH_GTK(1.0.1)
CFLAGS="$CFLAGS $GTK_CFLAGS"
# LDFLAGS="$LDFLAGS $GTK_LIBS"


AM_CONFIG_HEADER(include/aconfig.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_CONST
AC_C_INLINE
AC_HEADER_TIME

dnl Checks for library functions.
AC_PROG_GCC_TRADITIONAL

SAVE_UTIL_VERSION

AM_CONDITIONAL(COND_XAMIXER2, test "x$GTK_LIBS" != "x")
if test "x$GTK_LIBS" = "x"; then
  AC_MSG_RESULT(Not building XAmixer2 as Gtk+ was not found.)
fi
AM_CONDITIONAL(COND_GAMIX, test "x$GTK_LIBS" != "x")
if test "x$GTK_LIBS" = "x"; then
  AC_MSG_RESULT(Not building gamix as Gtk+ was not found.)
fi
AC_OUTPUT(Makefile alsactl/Makefile alsamixer/Makefile amixer/Makefile aplay/Makefile \
          include/Makefile utils/Makefile utils/alsa-utils.spec xamixer2/Makefile
	  gamix/Makefile seq/Makefile seq/aconnect/Makefile seq/aseqnet/Makefile)
